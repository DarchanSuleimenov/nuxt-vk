webpackJsonp([0],{"/TYz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("KU8k"),a=n("iA8U"),s=n("VU/8")(r.a,a.a,!1,null,null,null);s.options.__file="pages\\index.vue",e.default=s.exports},"1kxQ":function(t,e,n){"use strict";function r(t,e){localStorage.setItem("id",t),localStorage.setItem("token",e)}function a(){var t={user_id:null,access_token:null};return t.user_id=localStorage.getItem("id"),t.access_token=localStorage.getItem("token"),t}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a})},KU8k:function(t,e,n){"use strict";var r=n("Xxa5"),a=n.n(r),s=n("exGp"),i=n.n(s),c=n("N/Wh"),o=n("1kxQ"),u=n("N+6G");e.a={name:"HomePage",components:{UserCard:u.a},data:function(){return{friends:null}},methods:{authUrl:function(){return Object(c.c)("6605842")},loadFriends:function(){var t=i()(a.a.mark(function t(){var e,n,r,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=Object(o.a)(),n=e.user_id,r=e.access_token,n&&r){t.next=4;break}throw"";case 4:return t.next=6,Object(c.a)(n,r);case 6:if(null!==(s=t.sent)){t.next=9;break}throw"Неправильные параметры запроса!";case 9:if(!s.error){t.next=11;break}throw"Ошибка авторизации!";case 11:this.friends=s,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0),this.friends=null;case 18:case"end":return t.stop()}},t,this,[[0,14]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.loadFriends()}}},"N+6G":function(t,e,n){"use strict";var r=n("QQJh"),a=n("uX6f"),s=n("VU/8")(r.a,a.a,!1,null,null,null);s.options.__file="components\\UserCard.vue",e.a=s.exports},"N/Wh":function(t,e,n){"use strict";n.d(e,"c",function(){return S}),n.d(e,"b",function(){return w}),n.d(e,"a",function(){return b});var r,a,s,i,c=n("Xxa5"),o=n.n(c),u=n("exGp"),l=n.n(u),p=n("mtWM"),d=n.n(p),f=n("b1It"),h=n.n(f),v=(r=l()(o.a.mark(function t(e,n){var r,a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/method/friends.get",a={user_id:e,access_token:n,v:y},t.next=5,C(g,r,a);case 5:return s=t.sent,t.abrupt("return",s.data);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return r.apply(this,arguments)}),m=(a=l()(o.a.mark(function t(e,n){var r,a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/method/users.get",a={user_ids:n,fields:"photo_id,sex,bdate,country,city,has_photo",access_token:e,v:y},t.next=5,C(g,r,a);case 5:return s=t.sent,t.abrupt("return",s.data);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return a.apply(this,arguments)}),_=(s=l()(o.a.mark(function t(e,n){var r,a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/method/photos.getById",a={photos:n,access_token:e,v:"3.0"},t.next=5,C(g,r,a);case 5:return s=t.sent,t.abrupt("return",s.data);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return s.apply(this,arguments)}),b=(i=l()(o.a.mark(function t(e,n){var r,a,s,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(e,n);case 3:return r=(r=t.sent).response,a=r.items.slice(0,k),t.next=8,m(n,a);case 8:return r=(r=t.sent).response,s=r.map(function(t){return t.photo_id||""}).filter(function(t){return""!=t}),t.next=13,_(n,s);case 13:return i=(i=t.sent).response,r.forEach(function(t){var e=i.find(function(e){return e.owner_id==t.id});e&&(t.photo_id=e.src)}),t.abrupt("return",r);case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",null);case 22:case"end":return t.stop()}},t,this,[[0,19]])})),function(t,e){return i.apply(this,arguments)}),x="https://oauth.vk.com/",g="https://api.vk.com/",y="5.21",k=5;function w(t){var e=t.split("#");if(e.length<2||""===e[1])return e[0];var n=e[1],r={};return(n=n.split("&")).forEach(function(t){var e=t.split("=");e.length<2?r[e[0]]="":r[e[0]]=e[1]}),r}function C(t,e,n){var r={adapter:h.a,baseURL:t,headers:{},params:n};return d.a.get(e,r)}function S(t,e){e||(e="http://localhost:3000/auth/");return x+"authorize?client_id="+t+"&scope=friends,offline&redirect_uri="+e+"&display=page&v="+y+"&response_type=token"}},QQJh:function(t,e,n){"use strict";e.a={props:{firstName:{type:String,default:"имя неизвестно"},lastName:{type:String,default:"фамилия неизвестна"},photo:{type:String,default:"https://bulma.io/images/placeholders/128x128.png"},bdate:{type:String,default:"дата рождения неизвестна"},sex:{type:String,default:"пол неизвестен"},country:{type:String,default:"страна неизвестна"},city:{type:String,default:"город неизвестен"},hasPhoto:{type:Boolean,default:!1}},data:function(){return{}}}},b1It:function(t,e){var n=1;function r(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}t.exports=function(t){return new Promise(function(e,a){var s=document.createElement("script"),i=t.url;if(t.params){var c=r(t.params);c&&(i+=(i.indexOf("?")>=0?"&":"?")+c)}s.async=!0;var o="axiosJsonpCallback"+n++,u=window[o],l=!1;window[o]=function(t){(window[o]=u,l)||e({data:t,status:200})};var p={_:(new Date).getTime()};p[t.callbackParamName||"callback"]=o,i+=(i.indexOf("?")>=0?"&":"?")+r(p),s.onload=s.onreadystatechange=function(){s.readyState&&!/loaded|complete/.test(s.readyState)||(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),s=null)},t.cancelToken&&t.cancelToken.promise.then(function(t){s&&(l=!0,a(t))}),s.src=i,document.head.appendChild(s)})}},iA8U:function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"section"},[e("div",{staticClass:"tile is-ancestor"},[e("a",{attrs:{href:this.authUrl()}},[e("button",{staticClass:"button is-primary"},[this._v("Авторизоваться")])])]),e("div",{staticClass:"tile is-ancestor",staticStyle:{"flex-wrap":"wrap"}},this._l(this.friends,function(t){return e("UserCard",{key:t.id,staticClass:"tile is-4 is-child",attrs:{"first-name":t.first_name,"last-name":t.last_name,bdate:t.bdate,sex:1===t.sex?"женский":"мужской",country:t.country.title,city:t.city.title,photo:t.photo_id,"has-photo":1==t.has_photo}})}))])};r._withStripped=!0;var a={render:r,staticRenderFns:[]};e.a=a},uX6f:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[n("div",{staticClass:"media-left"},[n("figure",{staticClass:"image is-128x128"},[t.hasPhoto?n("img",{attrs:{src:t.photo,alt:"Placeholder image"}}):n("img",{attrs:{src:"https://bulma.io/images/placeholders/128x128.png",alt:"Placeholder image"}})])]),n("div",{staticClass:"media-content"},[n("p",{staticClass:"title is-4"},[t._v(t._s(t.firstName))]),n("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.lastName))]),n("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.sex))]),n("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.bdate))]),n("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.country))]),n("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.city))])])])])])};r._withStripped=!0;var a={render:r,staticRenderFns:[]};e.a=a}});