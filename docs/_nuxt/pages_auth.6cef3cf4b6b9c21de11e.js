webpackJsonp([1],{"1kxQ":function(t,e,n){"use strict";function r(t,e){localStorage.setItem("id",t),localStorage.setItem("token",e)}function a(){var t={user_id:null,access_token:null};return t.user_id=localStorage.getItem("id"),t.access_token=localStorage.getItem("token"),t}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a})},AVpm:function(t,e,n){"use strict";var r=function(){var t=this.$createElement;this._self._c;return this._m(0)};r._withStripped=!0;var a={render:r,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"section"},[e("h1",[this._v("Завершение авторизации...")])])}]};e.a=a},"Io/8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mhfI"),a=n("AVpm"),o=n("VU/8")(r.a,a.a,!1,null,null,null);o.options.__file="pages\\auth.vue",e.default=o.exports},"N/Wh":function(t,e,n){"use strict";n.d(e,"c",function(){return S}),n.d(e,"b",function(){return y}),n.d(e,"a",function(){return k});var r,a,o,c,s=n("Xxa5"),u=n.n(s),i=n("exGp"),p=n.n(i),d=n("mtWM"),l=n.n(d),f=n("b1It"),h=n.n(f),v=(r=p()(u.a.mark(function t(e,n){var r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/method/friends.get",a={user_id:e,access_token:n,v:x},t.next=5,I(w,r,a);case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return r.apply(this,arguments)}),m=(a=p()(u.a.mark(function t(e,n){var r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/method/users.get",a={user_ids:n,fields:"photo_id,sex,bdate,country,city,has_photo",access_token:e,v:x},t.next=5,I(w,r,a);case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return a.apply(this,arguments)}),_=(o=p()(u.a.mark(function t(e,n){var r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/method/photos.getById",a={photos:n,access_token:e,v:"3.0"},t.next=5,I(w,r,a);case 5:return o=t.sent,t.abrupt("return",o.data);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return o.apply(this,arguments)}),k=(c=p()(u.a.mark(function t(e,n){var r,a,o,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(e,n);case 3:return r=(r=t.sent).response,a=r.items.slice(0,g),t.next=8,m(n,a);case 8:return r=(r=t.sent).response,o=r.map(function(t){return t.photo_id||""}).filter(function(t){return""!=t}),t.next=13,_(n,o);case 13:return c=(c=t.sent).response,r.forEach(function(t){var e=c.find(function(e){return e.owner_id==t.id});e&&(t.photo_id=e.src)}),t.abrupt("return",r);case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",null);case 22:case"end":return t.stop()}},t,this,[[0,19]])})),function(t,e){return c.apply(this,arguments)}),b="https://oauth.vk.com/",w="https://api.vk.com/",x="5.21",g=5;function y(t){var e=t.split("#");if(e.length<2||""===e[1])return e[0];var n=e[1],r={};return(n=n.split("&")).forEach(function(t){var e=t.split("=");e.length<2?r[e[0]]="":r[e[0]]=e[1]}),r}function I(t,e,n){var r={adapter:h.a,baseURL:t,headers:{},params:n};return l.a.get(e,r)}function S(t,e){e||(e="https://darchansuleimenov.github.io/nuxt-vk/auth/");return b+"authorize?client_id="+t+"&scope=friends,offline&redirect_uri="+e+"&display=page&v="+x+"&response_type=token"}},b1It:function(t,e){var n=1;function r(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}t.exports=function(t){return new Promise(function(e,a){var o=document.createElement("script"),c=t.url;if(t.params){var s=r(t.params);s&&(c+=(c.indexOf("?")>=0?"&":"?")+s)}o.async=!0;var u="axiosJsonpCallback"+n++,i=window[u],p=!1;window[u]=function(t){(window[u]=i,p)||e({data:t,status:200})};var d={_:(new Date).getTime()};d[t.callbackParamName||"callback"]=u,c+=(c.indexOf("?")>=0?"&":"?")+r(d),o.onload=o.onreadystatechange=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),o=null)},t.cancelToken&&t.cancelToken.promise.then(function(t){o&&(p=!0,a(t))}),o.src=c,document.head.appendChild(o)})}},mhfI:function(t,e,n){"use strict";var r=n("N/Wh"),a=n("1kxQ");e.a={name:"AuthPage",data:function(){return{}},methods:{},mounted:function(){try{var t=window.location.href,e=Object(r.b)(t);if(!e.user_id||!e.access_token)throw"Нет данных авторизации!";var n=e.user_id,o=e.access_token;Object(a.b)(n,o)}catch(t){console.error(t)}this.$router.go("/")}}}});